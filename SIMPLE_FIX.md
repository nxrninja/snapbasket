# Simple Fix for Vercel Deployment

## ‚úÖ What I Fixed

1. **Simplified `vercel.json`** - Removed unnecessary configuration
2. **Cleaned up API handler** - Removed redundant code
3. **Fixed API URL** - Simple, works in dev and production
4. **Added `api/package.json`** - Fixes ES module error

## üî¥ The REAL Problem

**Your API is returning 500 because:**
- ‚ùå **Environment variables are NOT set in Vercel**
- ‚ùå **Database connection is failing**
- ‚ùå **Missing MongoDB connection string**

## ‚úÖ What You NEED To Do (3 Steps)

### Step 1: Set Environment Variables in Vercel

Go to Vercel Dashboard ‚Üí Your Project ‚Üí **Settings** ‚Üí **Environment Variables**

Add these (REQUIRED):

```
NODE_ENV=production
PRODUCTION_DB_URI=mongodb+srv://username:password@cluster.mongodb.net/snapbasket?retryWrites=true&w=majority&authSource=admin
ACCESS_TOKEN_SECRET=your-secret-key-here
REFRESH_TOKEN_SECRET=your-refresh-secret-key-here
ACCESS_TOKEN_EXPIRY=15m
REFRESH_TOKEN_EXPIRY=7d
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-gmail-app-password
```

**Select:** All environments (Production, Preview, Development)

### Step 2: Redeploy

After adding environment variables:
1. Go to **Deployments**
2. Click **‚ãØ** ‚Üí **Redeploy**
3. Wait for deployment

### Step 3: Check Logs

Go to **Deployments** ‚Üí Latest ‚Üí **Functions** ‚Üí `/api` ‚Üí **Logs**

Look for:
- ‚úÖ `Database connected successfully` = GOOD
- ‚ùå `Database URI is missing` = BAD (env var not set)
- ‚ùå `authentication failed` = BAD (wrong MongoDB credentials)

## üéØ About the Manifest Error

The manifest 401 error is **NOT critical** - it's just a PWA manifest file. The app will still work without it. But if you want to fix it:

1. Vercel serves static files automatically
2. The manifest is generated by VitePWA plugin
3. It should work automatically after deployment

**You can ignore this error for now** - focus on fixing the 500 errors first.

## üö® Why So Many Errors?

**Simple answer:** The backend needs environment variables (database connection, JWT secrets, etc.) to work. Without them, everything returns 500.

**It's NOT a code problem** - it's a configuration problem.

## ‚úÖ Summary

1. ‚úÖ Code is fixed and simplified
2. ‚ùå **YOU NEED TO:** Set environment variables in Vercel
3. ‚ùå **YOU NEED TO:** Redeploy after setting variables
4. ‚ùå **YOU NEED TO:** Check logs to verify database connection

**Once you set the environment variables, everything will work!**

## Quick Test

After setting env vars and redeploying:

```bash
# Test API
curl https://your-app.vercel.app/api

# Should return: {"message":"SnapBasket API","status":"ok"}
```

If you still get 500, check the logs - they will tell you exactly what's wrong.

